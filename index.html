import React, { useState, useEffect, useMemo } from 'react';
import { Search, ShoppingCart, User, Heart, Star, Plus, Minus, Filter, MapPin, Clock, Truck, Shield, Phone, Mail, ChevronRight, Grid, List, ChevronDown, Menu, X, Home, Package, CreditCard, Settings, LogOut, Bell, Gift, Percent, TrendingUp, Award, Users } from 'lucide-react';

const GroceryPro = () => {
  const [cart, setCart] = useState([]);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [wishlist, setWishlist] = useState([]);
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [currentSlide, setCurrentSlide] = useState(0);
  const [viewMode, setViewMode] = useState('grid');
  const [sortBy, setSortBy] = useState('popularity');
  const [priceRange, setPriceRange] = useState([0, 1000]);
  const [showFilters, setShowFilters] = useState(false);
  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);
  const [selectedLocation, setSelectedLocation] = useState('Chennai, Tamil Nadu');
  const [showLocationModal, setShowLocationModal] = useState(false);

  // Professional product data with realistic details
  const products = [
    { 
      id: 1, 
      name: 'Premium Alphonso Mangoes', 
      price: 299, 
      originalPrice: 399, 
      category: 'fruits', 
      brand: 'FarmFresh',
      image: 'https://placehold.co/300x300/FF6B6B/FFFFFF?text=🥭', 
      rating: 4.8, 
      reviewCount: 1247,
      discount: 25, 
      unit: 'per kg',
      inStock: true,
      fastDelivery: true,
      organic: true,
      description: 'Sweet and juicy Alphonso mangoes directly from Maharashtra farms',
      tags: ['premium', 'seasonal', 'bestseller']
    },
    { 
      id: 2, 
      name: 'Organic Red Apples', 
      price: 180, 
      originalPrice: 220, 
      category: 'fruits', 
      brand: 'OrganicValley',
      image: 'https://placehold.co/300x300/FF5252/FFFFFF?text=🍎', 
      rating: 4.6, 
      reviewCount: 892,
      discount: 18, 
      unit: 'per kg',
      inStock: true,
      fastDelivery: true,
      organic: true,
      description: 'Crisp and fresh organic apples, rich in nutrients',
      tags: ['organic', 'healthy']
    },
    { 
      id: 3, 
      name: 'A2 Cow Milk', 
      price: 65, 
      originalPrice: 75, 
      category: 'dairy', 
      brand: 'PureDairy',
      image: 'https://placehold.co/300x300/4ECDC4/FFFFFF?text=🥛', 
      rating: 4.9, 
      reviewCount: 2156,
      discount: 13, 
      unit: 'per litre',
      inStock: true,
      fastDelivery: true,
      organic: false,
      description: 'Fresh A2 cow milk from grass-fed cows',
      tags: ['fresh', 'daily-essentials', 'bestseller']
    },
    { 
      id: 4, 
      name: 'Artisan Whole Wheat Bread', 
      price: 45, 
      originalPrice: 55, 
      category: 'bakery', 
      brand: 'BreadBasket',
      image: 'https://placehold.co/300x300/FFD93D/FFFFFF?text=🍞', 
      rating: 4.4, 
      reviewCount: 567,
      discount: 18, 
      unit: 'per loaf',
      inStock: true,
      fastDelivery: false,
      organic: true,
      description: 'Freshly baked whole wheat bread with no preservatives',
      tags: ['fresh', 'healthy']
    },
    { 
      id: 5, 
      name: 'Free Range Brown Eggs', 
      price: 120, 
      originalPrice: 140, 
      category: 'dairy', 
      brand: 'FarmFresh',
      image: 'https://placehold.co/300x300/FF8C42/FFFFFF?text=🥚', 
      rating: 4.7, 
      reviewCount: 1034,
      discount: 14, 
      unit: 'per dozen',
      inStock: true,
      fastDelivery: true,
      organic: true,
      description: 'Brown eggs from free-range hens, rich in protein',
      tags: ['protein', 'fresh', 'organic']
    },
    { 
      id: 6, 
      name: 'Premium Basmati Rice', 
      price: 199, 
      originalPrice: 249, 
      category: 'grains', 
      brand: 'RiceKing',
      image: 'https://placehold.co/300x300/D7BDE2/FFFFFF?text=🍚', 
      rating: 4.5, 
      reviewCount: 743,
      discount: 20, 
      unit: 'per kg',
      inStock: true,
      fastDelivery: false,
      organic: false,
      description: 'Aged basmati rice with extra long grains',
      tags: ['premium', 'aged']
    },
    { 
      id: 7, 
      name: 'Organic Baby Spinach', 
      price: 35, 
      originalPrice: 45, 
      category: 'vegetables', 
      brand: 'GreenLeaf',
      image: 'https://placehold.co/300x300/82E0AA/FFFFFF?text=🥬', 
      rating: 4.3, 
      reviewCount: 456,
      discount: 22, 
      unit: 'per bunch',
      inStock: true,
      fastDelivery: true,
      organic: true,
      description: 'Tender baby spinach leaves, pesticide-free',
      tags: ['organic', 'leafy-greens', 'healthy']
    },
    { 
      id: 8, 
      name: 'Vine Ripened Tomatoes', 
      price: 40, 
      originalPrice: 50, 
      category: 'vegetables', 
      brand: 'FreshHarvest',
      image: 'https://placehold.co/300x300/E74C3C/FFFFFF?text=🍅', 
      rating: 4.6, 
      reviewCount: 823,
      discount: 20, 
      unit: 'per kg',
      inStock: true,
      fastDelivery: true,
      organic: false,
      description: 'Juicy tomatoes ripened on vine for maximum flavor',
      tags: ['fresh', 'vine-ripened']
    },
    { 
      id: 9, 
      name: 'Greek Style Yogurt', 
      price: 89, 
      originalPrice: 109, 
      category: 'dairy', 
      brand: 'CreamyDelight',
      image: 'https://placehold.co/300x300/5DADE2/FFFFFF?text=🥛', 
      rating: 4.8, 
      reviewCount: 967,
      discount: 18, 
      unit: 'per 400g',
      inStock: true,
      fastDelivery: true,
      organic: false,
      description: 'Thick and creamy Greek-style yogurt, high in protein',
      tags: ['protein', 'creamy', 'healthy']
    },
    { 
      id: 10, 
      name: 'Cold Pressed Orange Juice', 
      price: 125, 
      originalPrice: 155, 
      category: 'beverages', 
      brand: 'PurePress',
      image: 'https://placehold.co/300x300/F7DC6F/FFFFFF?text=🍊', 
      rating: 4.4, 
      reviewCount: 634,
      discount: 19, 
      unit: 'per 500ml',
      inStock: false,
      fastDelivery: false,
      organic: true,
      description: 'Cold-pressed orange juice with no added sugar',
      tags: ['fresh', 'no-sugar', 'vitamin-c']
    },
    { 
      id: 11, 
      name: 'Quinoa Seeds', 
      price: 450, 
      originalPrice: 520, 
      category: 'grains', 
      brand: 'SuperGrains',
      image: 'https://placehold.co/300x300/ED7D31/FFFFFF?text=🌾', 
      rating: 4.7, 
      reviewCount: 445,
      discount: 13, 
      unit: 'per 500g',
      inStock: true,
      fastDelivery: false,
      organic: true,
      description: 'Protein-rich quinoa seeds, perfect superfood',
      tags: ['superfood', 'protein', 'gluten-free']
    },
    { 
      id: 12, 
      name: 'Avocados', 
      price: 299, 
      originalPrice: 350, 
      category: 'fruits', 
      brand: 'ExoticFruits',
      image: 'https://placehold.co/300x300/2ECC71/FFFFFF?text=🥑', 
      rating: 4.5, 
      reviewCount: 378,
      discount: 15, 
      unit: 'per 4 pieces',
      inStock: true,
      fastDelivery: true,
      organic: true,
      description: 'Fresh avocados, perfect for salads and smoothies',
      tags: ['healthy-fats', 'imported', 'superfood']
    }
  ];

  const categories = [
    { id: 'all', name: 'All Categories', icon: '🛒', count: products.length },
    { id: 'fruits', name: 'Fresh Fruits', icon: '🍎', count: products.filter(p => p.category === 'fruits').length },
    { id: 'vegetables', name: 'Vegetables', icon: '🥕', count: products.filter(p => p.category === 'vegetables').length },
    { id: 'dairy', name: 'Dairy & Eggs', icon: '🥛', count: products.filter(p => p.category === 'dairy').length },
    { id: 'bakery', name: 'Bakery & Bread', icon: '🍞', count: products.filter(p => p.category === 'bakery').length },
    { id: 'grains', name: 'Grains & Cereals', icon: '🌾', count: products.filter(p => p.category === 'grains').length },
    { id: 'beverages', name: 'Beverages', icon: '🥤', count: products.filter(p => p.category === 'beverages').length }
  ];

  const bannerSlides = [
    { 
      id: 1, 
      title: 'Fresh Farm Produce', 
      subtitle: 'Up to 40% OFF on fresh fruits & vegetables', 
      bg: 'bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-600',
      cta: 'Shop Fresh Now'
    },
    { 
      id: 2, 
      title: 'Premium Dairy Collection', 
      subtitle: 'Free delivery on orders above ₹799', 
      bg: 'bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-600',
      cta: 'Explore Dairy'
    },
    { 
      id: 3, 
      title: 'Organic & Superfood Range', 
      subtitle: 'Healthy living starts with premium quality', 
      bg: 'bg-gradient-to-r from-purple-500 via-violet-500 to-purple-600',
      cta: 'Go Organic'
    }
  ];

  const locations = ['Chennai, Tamil Nadu', 'Mumbai, Maharashtra', 'Delhi, NCR', 'Bangalore, Karnataka', 'Hyderabad, Telangana', 'Pune, Maharashtra'];

  const sortOptions = [
    { value: 'popularity', label: 'Popularity' },
    { value: 'price-low', label: 'Price: Low to High' },
    { value: 'price-high', label: 'Price: High to Low' },
    { value: 'rating', label: 'Customer Rating' },
    { value: 'discount', label: 'Discount' },
    { value: 'newest', label: 'Newest First' }
  ];

  // Auto-slide banner
  useEffect(() => {
    const timer = setInterval(() => {
      setCurrentSlide((prev) => (prev + 1) % bannerSlides.length);
    }, 5000);
    return () => clearInterval(timer);
  }, []);

  const filteredAndSortedProducts = useMemo(() => {
    let filtered = products.filter(product => {
      const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                           product.brand.toLowerCase().includes(searchTerm.toLowerCase()) ||
                           product.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
      const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;
      const matchesPrice = product.price >= priceRange[0] && product.price <= priceRange[1];
      return matchesSearch && matchesCategory && matchesPrice;
    });

    // Sort products
    switch (sortBy) {
      case 'price-low':
        return filtered.sort((a, b) => a.price - b.price);
      case 'price-high':
        return filtered.sort((a, b) => b.price - a.price);
      case 'rating':
        return filtered.sort((a, b) => b.rating - a.rating);
      case 'discount':
        return filtered.sort((a, b) => b.discount - a.discount);
      default:
        return filtered.sort((a, b) => b.reviewCount - a.reviewCount);
    }
  }, [searchTerm, selectedCategory, priceRange, sortBy]);

  const addToCart = (product) => {
    setCart(prevCart => {
      const existingItem = prevCart.find(item => item.id === product.id);
      if (existingItem) {
        return prevCart.map(item =>
          item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item
        );
      }
      return [...prevCart, { ...product, quantity: 1 }];
    });
  };

  const removeFromCart = (productId) => {
    setCart(prevCart => {
      const existingItem = prevCart.find(item => item.id === productId);
      if (existingItem && existingItem.quantity > 1) {
        return prevCart.map(item =>
          item.id === productId ? { ...item, quantity: item.quantity - 1 } : item
        );
      }
      return prevCart.filter(item => item.id !== productId);
    });
  };

  const toggleWishlist = (product) => {
    setWishlist(prev => {
      const isInWishlist = prev.find(item => item.id === product.id);
      if (isInWishlist) {
        return prev.filter(item => item.id !== product.id);
      }
      return [...prev, product];
    });
  };

  const getCartItemQuantity = (productId) => {
    const item = cart.find(item => item.id === productId);
    return item ? item.quantity : 0;
  };

  const getTotalPrice = () => {
    return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
  };

  const getTotalItems = () => {
    return cart.reduce((total, item) => total + item.quantity, 0);
  };

  const getDiscountedPrice = (originalPrice, discount) => {
    return Math.round(originalPrice * (discount / 100));
  };

  const ProductCard = ({ product }) => {
    const quantity = getCartItemQuantity(product.id);
    const isInWishlist = wishlist.find(item => item.id === product.id);

    return (
      <div className="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 overflow-hidden group">
        <div className="relative">
          {/* Badges */}
          <div className="absolute top-3 left-3 z-10 flex flex-col gap-1">
            {product.discount > 0 && (
              <div className="bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium">
                {product.discount}% OFF
              </div>
            )}
            {product.organic && (
              <div className="bg-green-600 text-white text-xs px-2 py-1 rounded-full font-medium">
                ORGANIC
              </div>
            )}
            {product.fastDelivery && (
              <div className="bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-medium">
                FAST
              </div>
            )}
          </div>
          {/* Wishlist Button */}
          <button
            onClick={() => toggleWishlist(product)}
            className="absolute top-3 right-3 z-10 p-2 bg-white rounded-full shadow-md hover:shadow-lg transition-all"
          >
            <Heart className={`h-4 w-4 ${isInWishlist ? 'fill-red-500 text-red-500' : 'text-gray-400 hover:text-red-400'}`} />
          </button>
          {/* Product Image */}
          <div className="h-48 bg-gray-50 flex items-center justify-center relative overflow-hidden">
            <img
              src={product.image}
              alt={product.name}
              className="h-full w-full object-cover group-hover:scale-110 transition-transform duration-300"
            />
            {!product.inStock && (
              <div className="absolute inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center">
                <span className="text-white font-semibold text-lg">Out of Stock</span>
              </div>
            )}
          </div>
        </div>
        {/* Product Info */}
        <div className="p-4 space-y-3">
          {/* Brand */}
          <div className="text-xs text-blue-600 font-medium uppercase tracking-wide">
            {product.brand}
          </div>
          {/* Product Name */}
          <h3 className="font-semibold text-gray-900 line-clamp-2 text-sm leading-5">
            {product.name}
          </h3>
          {/* Unit */}
          <p className="text-xs text-gray-500">{product.unit}</p>
          {/* Rating & Reviews */}
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-1">
              <Star className="h-3 w-3 fill-yellow-400 text-yellow-400" />
              <span className="text-xs font-medium text-gray-700">{product.rating}</span>
              <span className="text-xs text-gray-400">({product.reviewCount.toLocaleString()})</span>
            </div>
            {product.tags.includes('bestseller') && (
              <div className="bg-orange-100 text-orange-600 text-xs px-2 py-1 rounded font-medium">
                Bestseller
              </div>
            )}
          </div>
          {/* Price */}
          <div className="space-y-1">
            <div className="flex items-center space-x-2">
              <span className="text-lg font-bold text-gray-900">₹{product.price}</span>
              {product.originalPrice > product.price && (
                <span className="text-sm text-gray-500 line-through">₹{product.originalPrice}</span>
              )}
            </div>
            {product.originalPrice > product.price && (
              <div className="text-xs text-green-600 font-medium">
                You save ₹{getDiscountedPrice(product.originalPrice, product.discount)}
              </div>
            )}
          </div>
          {/* Tags */}
          <div className="flex flex-wrap gap-1">
            {product.tags.slice(0, 2).map(tag => (
              <span key={tag} className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">
                {tag}
              </span>
            ))}
          </div>
        </div>
        {/* Add to Cart Section */}
        <div className="px-4 pb-4">
          {!product.inStock ? (
            <button
              disabled
              className="w-full bg-gray-300 text-gray-500 py-2.5 px-4 rounded-lg font-semibold cursor-not-allowed"
            >
              Out of Stock
            </button>
          ) : quantity === 0 ? (
            <button
              onClick={() => addToCart(product)}
              className="w-full bg-green-600 hover:bg-green-700 text-white py-2.5 px-4 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 shadow-sm hover:shadow"
            >
              <Plus className="h-4 w-4" />
              <span>Add to Cart</span>
            </button>
          ) : (
            <div className="flex items-center justify-between bg-green-50 border border-green-200 rounded-lg p-2">
              <button
                onClick={() => removeFromCart(product.id)}
                className="bg-green-600 hover:bg-green-700 text-white p-1.5 rounded-md transition-colors"
              >
                <Minus className="h-4 w-4" />
              </button>
              <span className="font-bold text-green-800 px-3">{quantity}</span>
              <button
                onClick={() => addToCart(product)}
                className="bg-green-600 hover:bg-green-700 text-white p-1.5 rounded-md transition-colors"
              >
                <Plus className="h-4 w-4" />
              </button>
            </div>
          )}
        </div>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Top Bar */}
      <div className="bg-gray-900 text-white text-sm py-2">
        <div className="container mx-auto px-4 flex justify-between items-center">
          <div className="flex items-center space-x-6">
            <div className="flex items-center space-x-1">
              <Phone className="h-4 w-4" />
              <span>24/7 Customer Support: 1800-123-4567</span>
            </div>
            <div className="flex items-center space-x-1">
              <Mail className="h-4 w-4" />
              <span>help@grocerypro.com</span>
            </div>
          </div>
          <div className="flex items-center space-x-4">
            <span>Free delivery on orders above ₹799</span>
          </div>
        </div>
      </div>
      
      {/* Header */}
      <header className="bg-white shadow-sm sticky top-0 z-40 border-b">
        <div className="container mx-auto px-4">
          <div className="flex items-center justify-between h-16">
            {/* Logo */}
            <div className="flex items-center space-x-3">
              <div className="bg-gradient-to-r from-green-600 to-emerald-600 text-white p-2 rounded-xl shadow-lg">
                <ShoppingCart className="h-7 w-7" />
              </div>
              <div>
                <h1 className="text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">
                  GroceryPro
                </h1>
                <p className="text-xs text-gray-500">Premium Grocery Experience</p>
              </div>
            </div>
            
            {/* Location Selector */}
            <div className="hidden lg:flex items-center space-x-2">
              <MapPin className="h-5 w-5 text-gray-500" />
              <button
                onClick={() => setShowLocationModal(!showLocationModal)}
                className="text-sm text-gray-700 hover:text-green-600 flex items-center space-x-1 relative"
              >
                <span>Deliver to: <span className="font-semibold">{selectedLocation}</span></span>
                <ChevronDown className="h-4 w-4" />
              </button>
              {showLocationModal && (
                <div className="absolute top-full mt-2 bg-white rounded-lg shadow-xl border p-2 w-64 z-50">
                  {locations.map(location => (
                    <button
                      key={location}
                      onClick={() => {
                        setSelectedLocation(location);
                        setShowLocationModal(false);
                      }}
                      className="w-full text-left px-3 py-2 hover:bg-gray-50 rounded text-sm"
                    >
                      {location}
                    </button>
                  ))}
                </div>
              )}
            </div>
            
            {/* Search Bar */}
            <div className="flex-1 max-w-2xl mx-8">
              <div className="relative">
                <Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" />
                <input
                  type="text"
                  placeholder="Search for products, brands, categories..."
                  className="w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent bg-gray-50 focus:bg-white transition-all"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                />
              </div>
            </div>
            
            {/* User Actions */}
            <div className="flex items-center space-x-2">
              <button className="p-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-xl transition-all relative">
                <Bell className="h-6 w-6" />
                <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                  3
                </span>
              </button>
              
              <button
                onClick={() => toggleWishlist}
                className="p-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-xl transition-all relative"
              >
                <Heart className="h-6 w-6" />
                {wishlist.length > 0 && (
                  <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                    {wishlist.length}
                  </span>
                )}
              </button>
              
              <button className="p-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-xl transition-all relative">
                <ShoppingCart className="h-6 w-6" />
                {getTotalItems() > 0 && (
                  <span className="absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                    {getTotalItems()}
                  </span>
                )}
              </button>
              
              {/* User Menu */}
              <div className="relative">
                <button
                  onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}
                  className="flex items-center space-x-2 p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-xl transition-all"
                >
                  <User className="h-6 w-6" />
                  <ChevronDown className="h-4 w-4" />
                </button>
                {isUserMenuOpen && (
                  <div className="absolute right-0 top-full mt-2 bg-white rounded-xl shadow-xl border w-56 py-2 z-50">
                    <div className="px-4 py-3 border-b">
                      <p className="font-semibold text-gray-900">John Doe</p>
                      <p className="text-sm text-gray-500">john@example.com</p>
                    </div>
                    <div className="py-2">
                      <a href="#" className="flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 text-gray-700">
                        <Home className="h-4 w-4" />
                        <span>Dashboard</span>
                      </a>
                      <a href="#" className="flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 text-gray-700">
                        <Package className="h-4 w-4" />
                        <span>My Orders</span>
                      </a>
                      <a href="#" className="flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 text-gray-700">
                        <CreditCard className="h-4 w-4" />
                        <span>Payment Methods</span>
                      </a>
                      <a href="#" className="flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 text-gray-700">
                        <Settings className="h-4 w-4" />
                        <span>Settings</span>
                      </a>
                      <hr className="my-2" />
                      <a href="#" className="flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 text-gray-700">
                        <LogOut className="h-4 w-4" />
                        <span>Sign Out</span>
                      </a>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </header>
      
      {/* Navigation Menu */}
      <nav className="bg-white border-b hidden lg:block">
        <div className="container mx-auto px-4">
          <div className="flex items-center justify-between h-12">
            <div className="flex items-center space-x-8">
              {categories.slice(1, 7).map(category => (
                <button
                  key={category.id}
                  onClick={() => setSelectedCategory(category.id)}
                  className={`text-sm font-medium hover:text-green-600 transition-colors flex items-center space-x-2 ${
                    selectedCategory === category.id ? 'text-green-600' : 'text-gray-600'
                  }`}
                >
                  <span className="text-lg">{category.icon}</span>
                  <span>{category.name}</span>
                </button>
              ))}
            </div>
            <div className="flex items-center space-x-4">
              <div className="flex items-center space-x-2 text-sm text-gray-500">
                <Truck className="h-4 w-4" />
                <span>Express Delivery Available</span>
              </div>
              <div className="flex items-center space-x-2 text-sm text-gray-500">
                <Shield className="h-4 w-4" />
                <span>100% Quality Guaranteed</span>
              </div>
            </div>
          </div>
        </div>
      </nav>
      
      {/* Banner Slider */}
      <div className="relative h-80 overflow-hidden">
        {bannerSlides.map((slide, index) => (
          <div
            key={slide.id}
            className={`absolute inset-0 transition-all duration-700 ease-in-out ${
              index === currentSlide ? 'opacity-100 translate-x-0' : 'opacity-0 translate-x-full'
            } ${slide.bg} text-white`}
          >
            <div className="container mx-auto px-4 h-full flex items-center">
              <div className="max-w-2xl">
                <h2 className="text-5xl font-bold mb-4">{slide.title}</h2>
                <p className="text-xl mb-6 opacity-90">{slide.subtitle}</p>
                <button className="bg-white text-gray-800 px-8 py-3 rounded-xl font-semibold hover:bg-gray-100 transition-colors shadow-lg">
                  {slide.cta}
                </button>
              </div>
            </div>
          </div>
        ))}
        {/* Slider Controls */}
        <div className="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3">
          {bannerSlides.map((_, index) => (
            <button
              key={index}
              className={`w-3 h-3 rounded-full transition-all duration-300 ${
                index === currentSlide ? 'bg-white scale-125' : 'bg-white opacity-50'
              }`}
              onClick={() => setCurrentSlide(index)}
            />
          ))}
        </div>
      </div>
      
      {/* Trust Indicators */}
      <div className="bg-white py-8 border-b">
        <div className="container mx-auto px-4">
          <div className="grid grid-cols-2 lg:grid-cols-4 gap-8">
            <div className="flex items-center justify-center space-x-3">
              <div className="bg-green-100 p-3 rounded-full">
                <Truck className="h-6 w-6 text-green-600" />
              </div>
              <div>
                <h3 className="font-semibold text-gray-900">Free Delivery</h3>
                <p className="text-sm text-gray-500">On orders above ₹799</p>
              </div>
            </div>
            <div className="flex items-center justify-center space-x-3">
              <div className="bg-blue-100 p-3 rounded-full">
                <Shield className="h-6 w-6 text-blue-600" />
              </div>
              <div>
                <h3 className="font-semibold text-gray-900">Quality Assured</h3>
                <p className="text-sm text-gray-500">100% fresh guarantee</p>
              </div>
            </div>
            <div className="flex items-center justify-center space-x-3">
              <div className="bg-purple-100 p-3 rounded-full">
                <Clock className="h-6 w-6 text-purple-600" />
              </div>
              <div>
                <h3 className="font-semibold text-gray-900">Express Delivery</h3>
                <p className="text-sm text-gray-500">Within 2-4 hours</p>
              </div>
            </div>
            <div className="flex items-center justify-center space-x-3">
              <div className="bg-orange-100 p-3 rounded-full">
                <Award className="h-6 w-6 text-orange-600" />
              </div>
              <div>
                <h3 className="font-semibold text-gray-900">Best Prices</h3>
                <p className="text-sm text-gray-500">Lowest price guarantee</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div className="container mx-auto px-4 py-8">
        <div className="flex flex-col lg:flex-row gap-8">
          {/* Sidebar - Filters */}
          <div className="w-full lg:w-80">
            {/* Mobile Filter Toggle */}
            <button
              onClick={() => setShowFilters(!showFilters)}
              className="lg:hidden w-full bg-white border border-gray-200 rounded-xl px-4 py-3 mb-4 flex items-center justify-between"
            >
              <span className="font-medium">Filters</span>
              <Filter className="h-5 w-5" />
            </button>
            
            <div className={`space-y-6 ${showFilters ? 'block' : 'hidden lg:block'}`}>
              {/* Categories */}
              <div className="bg-white rounded-xl shadow-sm border p-6">
                <h3 className="text-lg font-bold mb-4 flex items-center text-gray-900">
                  <Filter className="h-5 w-5 mr-2" />
                  Categories
                </h3>
                <div className="space-y-2">
                  {categories.map(category => (
                    <button
                      key={category.id}
                      onClick={() => setSelectedCategory(category.id)}
                      className={`w-full text-left px-4 py-3 rounded-lg transition-all flex items-center justify-between ${
                        selectedCategory === category.id
                          ? 'bg-green-50 text-green-700 border border-green-200'
                          : 'hover:bg-gray-50'
                      }`}
                    >
                      <div className="flex items-center space-x-3">
                        <span className="text-xl">{category.icon}</span>
                        <span className="font-medium">{category.name}</span>
                      </div>
                      <span className={`text-sm px-2 py-1 rounded-full ${
                        selectedCategory === category.id 
                          ? 'bg-green-200 text-green-700' 
                          : 'bg-gray-100 text-gray-500'
                      }`}>
                        {category.count}
                      </span>
                    </button>
                  ))}
                </div>
              </div>
              
              {/* Price Range */}
              <div className="bg-white rounded-xl shadow-sm border p-6">
                <h3 className="text-lg font-bold mb-4 text-gray-900">Price Range</h3>
                <div className="space-y-4">
                  <div className="flex items-center justify-between text-sm text-gray-600">
                    <span>₹{priceRange[0]}</span>
                    <span>₹{priceRange[1]}</span>
                  </div>
                  <input
                    type="range"
                    min="0"
                    max="1000"
                    value={priceRange[1]}
                    onChange={(e) => setPriceRange([0, parseInt(e.target.value)])}
                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                  />
                  <div className="flex space-x-2">
                    <input
                      type="number"
                      placeholder="Min"
                      value={priceRange[0]}
                      onChange={(e) => setPriceRange([parseInt(e.target.value) || 0, priceRange[1]])}
                      className="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"
                    />
                    <input
                      type="number"
                      placeholder="Max"
                      value={priceRange[1]}
                      onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value) || 1000])}
                      className="w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"
                    />
                  </div>
                </div>
              </div>
              
              {/* Special Offers */}
              <div className="bg-white rounded-xl shadow-sm border p-6">
                <h3 className="text-lg font-bold mb-4 text-gray-900">Special Offers</h3>
                <div className="space-y-3">
                  <label className="flex items-center space-x-3 cursor-pointer">
                    <input type="checkbox" className="rounded border-gray-300 text-green-600 focus:ring-green-500" />
                    <span className="text-sm">Buy 1 Get 1 Free</span>
                  </label>
                  <label className="flex items-center space-x-3 cursor-pointer">
                    <input type="checkbox" className="rounded border-gray-300 text-green-600 focus:ring-green-500" />
                    <span className="text-sm">Organic Products</span>
                  </label>
                  <label className="flex items-center space-x-3 cursor-pointer">
                    <input type="checkbox" className="rounded border-gray-300 text-green-600 focus:ring-green-500" />
                    <span className="text-sm">Express Delivery</span>
                  </label>
                  <label className="flex items-center space-x-3 cursor-pointer">
                    <input type="checkbox" className="rounded border-gray-300 text-green-600 focus:ring-green-500" />
                    <span className="text-sm">In Stock Only</span>
                  </label>
                </div>
              </div>
              
              {/* Customer Support */}
              <div className="bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6">
                <h3 className="text-lg font-bold mb-3 text-green-800">Need Help?</h3>
                <p className="text-sm text-green-700 mb-4">Our customer support team is here to help you 24/7</p>
                <button className="w-full bg-green-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors">
                  Contact Support
                </button>
              </div>
            </div>
          </div>
          
          {/* Main Content */}
          <div className="flex-1">
            {/* Toolbar */}
            <div className="bg-white rounded-xl shadow-sm border p-4 mb-6">
              <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                <div className="flex items-center space-x-4">
                  <h2 className="text-lg font-bold text-gray-900">
                    {filteredAndSortedProducts.length} Products
                  </h2>
                  {selectedCategory !== 'all' && (
                    <span className="text-sm text-gray-500">
                      in {categories.find(c => c.id === selectedCategory)?.name}
                    </span>
                  )}
                </div>
                <div className="flex items-center space-x-4">
                  {/* View Mode */}
                  <div className="flex items-center space-x-1 bg-gray-100 rounded-lg p-1">
                    <button
                      onClick={() => setViewMode('grid')}
                      className={`p-2 rounded transition-colors ${
                        viewMode === 'grid' ? 'bg-white text-green-600 shadow-sm' : 'text-gray-600'
                      }`}
                    >
                      <Grid className="h-4 w-4" />
                    </button>
                    <button
                      onClick={() => setViewMode('list')}
                      className={`p-2 rounded transition-colors ${
                        viewMode === 'list' ? 'bg-white text-green-600 shadow-sm' : 'text-gray-600'
                      }`}
                    >
                      <List className="h-4 w-4" />
                    </button>
                  </div>
                  {/* Sort */}
                  <select
                    value={sortBy}
                    onChange={(e) => setSortBy(e.target.value)}
                    className="px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white"
                  >
                    {sortOptions.map(option => (
                      <option key={option.value} value={option.value}>
                        {option.label}
                      </option>
                    ))}
                  </select>
                </div>
              </div>
            </div>
            
            {/* Products Grid */}
            <div className={`grid gap-6 ${
              viewMode === 'grid' 
                ? 'grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4' 
                : 'grid-cols-1'
            }`}>
              {filteredAndSortedProducts.map(product => (
                <ProductCard key={product.id} product={product} />
              ))}
            </div>
            
            {filteredAndSortedProducts.length === 0 && (
              <div className="text-center py-16 bg-white rounded-xl">
                <div className="text-8xl mb-6">🔍</div>
                <h3 className="text-2xl font-bold text-gray-600 mb-3">No products found</h3>
                <p className="text-gray-500 mb-6">Try adjusting your search terms or filters</p>
                <button
                  onClick={() => {
                    setSearchTerm('');
                    setSelectedCategory('all');
                    setPriceRange([0, 1000]);
                  }}
                  className="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                >
                  Clear All Filters
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
      
      {/* Floating Cart */}
      {getTotalItems() > 0 && (
        <div className="fixed bottom-6 right-6 bg-white rounded-2xl shadow-2xl border p-6 max-w-sm z-30">
          <div className="flex items-center justify-between mb-4">
            <h3 className="font-bold text-lg text-gray-900">Cart Summary</h3>
            <ShoppingCart className="h-6 w-6 text-green-600" />
          </div>
          <div className="space-y-3 mb-4">
            <div className="flex justify-between items-center">
              <span className="text-gray-600">Items:</span>
              <span className="font-semibold">{getTotalItems()}</span>
            </div>
            <div className="flex justify-between items-center text-lg">
              <span className="font-bold text-gray-900">Total:</span>
              <span className="font-bold text-green-600">₹{getTotalPrice().toLocaleString()}</span>
            </div>
            {getTotalPrice() >= 799 && (
              <div className="bg-green-50 border border-green-200 rounded-lg p-3">
                <div className="flex items-center space-x-2">
                  <Truck className="h-4 w-4 text-green-600" />
                  <span className="text-sm text-green-700 font-medium">Free delivery applied!</span>
                </div>
              </div>
            )}
          </div>
          <div className="space-y-3">
            <button className="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors shadow-lg">
              View Cart & Checkout
            </button>
            <button className="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-xl font-medium transition-colors">
              Continue Shopping
            </button>
          </div>
        </div>
      )}
      
      {/* Footer */}
      <footer className="bg-gray-900 text-white mt-16">
        <div className="container mx-auto px-4 py-12">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center space-x-3 mb-4">
                <div className="bg-gradient-to-r from-green-600 to-emerald-600 text-white p-2 rounded-xl">
                  <ShoppingCart className="h-6 w-6" />
                </div>
                <h3 className="text-xl font-bold">GroceryPro</h3>
              </div>
              <p className="text-gray-400 mb-4">Your trusted partner for fresh groceries and premium quality products delivered to your doorstep.</p>
              <div className="flex space-x-4">
                <div className="bg-gray-800 p-2 rounded-lg">
                  <Users className="h-5 w-5" />
                </div>
                <div className="bg-gray-800 p-2 rounded-lg">
                  <Mail className="h-5 w-5" />
                </div>
                <div className="bg-gray-800 p-2 rounded-lg">
                  <Phone className="h-5 w-5" />
                </div>
              </div>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Quick Links</h4>
              <ul className="space-y-2 text-gray-400">
                <li><a href="#" className="hover:text-white transition-colors">About Us</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Contact Us</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Privacy Policy</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Terms of Service</a></li>
                <li><a href="#" className="hover:text-white transition-colors">FAQ</a></li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Categories</h4>
              <ul className="space-y-2 text-gray-400">
                <li><a href="#" className="hover:text-white transition-colors">Fresh Fruits</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Vegetables</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Dairy Products</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Bakery Items</a></li>
                <li><a href="#" className="hover:text-white transition-colors">Beverages</a></li>
              </ul>
            </div>
            <div>
              <h4 className="font-semibold mb-4">Customer Service</h4>
              <div className="space-y-3 text-gray-400">
                <div className="flex items-center space-x-2">
                  <Phone className="h-4 w-4" />
                  <span>1800-123-4567</span>
                </div>
                <div className="flex items-center space-x-2">
                  <Mail className="h-4 w-4" />
                  <span>help@grocerypro.com</span>
                </div>
                <div className="flex items-center space-x-2">
                  <Clock className="h-4 w-4" />
                  <span>24/7 Support</span>
                </div>
              </div>
            </div>
          </div>
          <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2025 GroceryPro. All rights reserved. Built for premium grocery experience.</p>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default GroceryPro;
```
